{
  "hash": "37834908ff8ff2abb483357dd8e7046d",
  "result": {
    "markdown": "---\ntitle: \"R visualization\"\nformat: \n  html:\n    fig-width: 8\n    fig-height: 6\n    fig.retina: 3\n    message: false\n    warning: false\n    echo: true\n    code-fold: true\n    code-summary: \"Show the code\"\n    code-tools: true\n---\n\n\n\n\n<link rel=\"stylesheet\" href=\"//fonts.googleapis.com/css?family=Lato\" />\n\n\n\n\n\n\nR is an amazing tool for data analysis and visualization. The code on this page shows the a variety of plots using the R `ggplot2` package to display statistical outputs. All the data shown on the page is fictitious and only meant for illustrative purposes.\n\n\n## Use of Fonts \n\n- Century Gothic Bold, font size 12 should be used for the labels and values on the graph. \n\n## General Rules\n\n- All axes should be labelled and where possible, the values for data points should be indicated on the graph.\n- Prevent use of grid lines whenever possible to not clutter plots\n- Use line breaks in long labels\n- Be conscious about the way axis are ordered. For example, order regions either from the lowest to the highest value or using the serpentine order.\n- label axis appropiately\n\n\n## Use of Colours\n\nPlease use the following colour schemes for different types of disaggregation.\n\n\n#### Sex\n\n\n```{=html}\n<div class=\"multi-group-container\">\n                    <div class=\"color two\">\n                    <p style=\"text-align:center\">Male</p>\n                        <div class=\"swatch groupcolor male dark\">\n                            <div class=\"color-code\"><br><br>Hex: #206095 <br>rgb(32, 96, 149)<br>.</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#1696d2\"></rect></svg></div>\n                    <div class=\"color two\">\n                        <p style=\"text-align: center\">Female</p>\n                        <div class=\"swatch groupcolor female dark\">\n                            <div class=\"color-code\"><br><br>Hex: #F66068 <br>rgb(246, 96,104)<br>.</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#000000\"></rect></svg></div>\n                </div>\n    \n    <br>\n    <br>\n```\n\n\n#### Locality Type\n\n\n```{=html}\n<div class=\"multi-group-container\">\n                    <div class=\"color three\">\n                         <p style=\"text-align: center\">National</p>  \n                        <div class=\"swatch groupcolor national dark\">\n                         <div class=\"color-code\"><br><br>#27A0CC <br>.</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#1696d2\"></rect></svg></div>\n                    <div class=\"color three\">\n                        <p style=\"text-align: center\">Urban</p>\n                        <div class=\"swatch groupcolor urban dark\">\n                            <div class=\"color-code\"><br><br>#871A5B <br>.</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#000000\"></rect></svg></div>\n                            <div class=\"color three\">\n                                <p style=\"text-align: center\">Rural</p>\n                        <div class=\"swatch groupcolor rural\">\n                            \n                            <div class=\"color-code\"><br><br>#22D0B6 <br>.</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#000000\"></rect></svg></div>\n                </div>\n    \n    <br>\n    <br>\n```\n\n<br>\n\n#### Neutral\nNeutral is used on general variables. It is advise that the maximum number of variables per plot should not be more than 5.\n\n\n```{=html}\n<div class=\"multi-group-container\">\n\n                    <div class=\"colour six\">\n                        <div class=\"swatch groupcolor Neutral1 dark\">\n                            <div class=\"color-code\"><br>#002060</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#1696d2\"></rect></svg></div>\n                    <div class=\"colour six\">\n                        <div class=\"swatch groupcolor Neutral2 dark\">\n                            <div class=\"color-code\"><br>#0070C0</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#d2d2d2\"></rect></svg></div>\n                    <div class=\"colour six\">\n                        <div class=\"swatch groupcolor Neutral3 dark\">\n                            <div class=\"color-code\"><br>#00B0F0</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#000000\"></rect></svg></div>\n                    <div class=\"colour six\">\n                        <div class=\"swatch groupcolor Neutral4\">\n                            <div class=\"color-code\"><br>#8EA9DB</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#fdbf11\"></rect></svg></div>\n                    <div class=\"colour six\">\n                        <div class=\"swatch groupcolor Neutral5\">\n                            <div class=\"color-code\"><br>#9BC2E6</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#ec008b\"></rect></svg></div>\n                    <div class=\"colour six\">\n                        <div class=\"swatch groupcolor Neutral6\">\n                            <div class=\"color-code\"><br>#FFFFCC</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#55b748\"></rect></svg></div>\n                    \n    </div>\n    \n    <br>\n    <br>\n```\n\n<br>\n\n#### Positive \\~ Negative\n\n\n```{=html}\n<div class=\"multi-group-container\">\n\n                    <div class=\"colour five\">\n                        <div class=\"swatch groupcolor Positive1\">\n                            <div class=\"color-code\"><br>#6AA84F</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#1696d2\"></rect></svg></div>\n                    <div class=\"colour five\">\n                        <div class=\"swatch groupcolor Positive2\">\n                            <div class=\"color-code\"><br>#93C47D</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#d2d2d2\"></rect></svg></div>\n                    <div class=\"colour five\">\n                        <div class=\"swatch groupcolor Neutral\">\n                            <div class=\"color-code\"><br>#FFFFCC</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#000000\"></rect></svg></div>\n                    <div class=\"colour five\">\n                        <div class=\"swatch groupcolor Negative2\">\n                            <div class=\"color-code\"><br>#F4CCCC</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#fdbf11\"></rect></svg></div>\n                    <div class=\"colour six\">\n                        <div class=\"swatch groupcolor Negative1\">\n                            <div class=\"color-code\"><br>#E06666</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#ec008b\"></rect></svg></div>\n                    \n    </div>\n    \n    <br>\n    <br>\n```\n\n<br>\n\n#### Population & Density\n\n\n```{=html}\n<div class=\"multi-group-container\">\n\n                    <div class=\"colour five\">\n                        <div class=\"swatch groupcolor pop1\">\n                            <div class=\"color-code\"><br>#FFFFCC</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#d2d2d2\"></rect></svg></div>\n                    <div class=\"colour five\">\n                        <div class=\"swatch groupcolor pop2\">\n                            <div class=\"color-code\"><br>#C7E9B4</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#000000\"></rect></svg></div>\n                    <div class=\"colour five\">\n                        <div class=\"swatch groupcolor pop3\">\n                            <div class=\"color-code\"><br>#7FCDBB</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#fdbf11\"></rect></svg></div>\n                    <div class=\"colour five\">\n                        <div class=\"swatch groupcolor pop4 dark\">\n                            <div class=\"color-code\"><br>#41B6C4</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#ec008b\"></rect></svg></div>\n                    <div class=\"colour five\">\n                        <div class=\"swatch groupcolor pop5 dark\">\n                            <div class=\"color-code\"><br>#2C7FB8</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#55b748\"></rect></svg></div>\n                    \n    </div>\n    \n    <br>\n    <br>\n```\n\n<br>\n\n#### Incidence\n\n\n```{=html}\n<div class=\"multi-group-container\">\n\n                    <div class=\"colour six\">\n                        <div class=\"swatch groupcolor inci1\">\n                            <div class=\"color-code\"><br>#FECCCC</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#d2d2d2\"></rect></svg></div>\n                    \n     <div class=\"colour six\">\n                        <div class=\"swatch groupcolor inci2\">\n                            <div class=\"color-code\"><br>#FF9999</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#000000\"></rect></svg></div>\n                    \n     <div class=\"colour six\">\n                        <div class=\"swatch groupcolor inci3 dark\">\n                            <div class=\"color-code\"><br>#FF6666</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#fdbf11\"></rect></svg></div>\n                   \n     <div class=\"colour six\">\n                        <div class=\"swatch groupcolor inci4 dark\">\n                            <div class=\"color-code\"><br>#FF3333</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#ec008b\"></rect></svg></div>\n                   \n     <div class=\"colour six\">\n                        <div class=\"swatch groupcolor inci5 dark\">\n                            <div class=\"color-code\"><br>#CC0000</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#55b748\"></rect></svg></div>\n     \n     <div class=\"colour six\">\n                        <div class=\"swatch groupcolor inci6 dark\">\n                            <div class=\"color-code\"><br>#990000</div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#55b748\"></rect></svg></div>\n                    \n    </div>\n    \n    <br>\n    <br>\n```\n\n<br>\n\n#### Food / Non-food\n\n\n```{=html}\n<div class=\"multi-group-container\">\n                    <div class=\"color two\">\n                    <p style=\"text-align:center\">Food</p>\n                        <div class=\"swatch groupcolor food\">\n                            <div class=\"color-code\"><br>#3ECDB9 <br></div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#1696d2\"></rect></svg></div>\n                    <div class=\"color two\">\n                        <p style=\"text-align: center\">Non-food</p>\n                        <div class=\"swatch groupcolor nonfood\">\n                            <div class=\"color-code\"><br>#04BCFC<br></div>\n                        </div>\n                    <svg width=\"30\" height=\"30\" class=\"print-swatch\"><rect width=\"30\" height=\"30\" fill=\"#000000\"></rect></svg></div>\n                </div>\n    \n    <br>\n    <br>\n```\n\n<br>\n\n# Using GSS theme\n\nIn the future, GSS will release it is own package for data visualizations. For now it suffices to run this code to load the all the R code to set the right defaults (colours, fonts, etc.) to create plots in the GGS theme.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# load packages\nlibrary(ggplot2)\nlibrary(tidyverse)\nlibrary(ggtext)\nlibrary(gghighlight)\nlibrary(sysfonts)\nlibrary(showtextdb)\nlibrary(showtext)\nlibrary(glue)\nlibrary(scales)\nlibrary(kableExtra)\nlibrary(patchwork)\n\n\n# load the font\nfont_add(\"century gothic bold\", \"Font/CenturyGothic.ttf\")\n\n# make sure ggplot recognizes the font \n# and set the font to high-res\nshowtext_auto()\nshowtext::showtext_opts(dpi = 300)\n\n# set default colour for plots with multiple categories\noptions(ggplot2.discrete.colour = c(\"#210D69\", \"#DB2E76\", \"#586889\", \"#227C42\"))\noptions(ggplot2.discrete.fill   = c(\"#210D69\", \"#DB2E76\", \"#586889\", \"#227C42\"))\n\n# set default colour for plots with a single category\nupdate_geom_defaults(\"bar\",   list(fill = \"#27A0CC\"))\nupdate_geom_defaults(\"col\",   list(fill = \"#27A0CC\"))\n\n# update the font to show in geom_text()\nupdate_geom_defaults(\"text\",   list(family = \"century gothic bold\", size = 4.5 ))\n\n# create a GGS theme based on the theme_gray()\ngssthemes<-function(){\n  theme_gray() %+replace%\n    theme(\n      text=element_text(family=\"century gothic bold\",\n                        colour=\"black\",\n                        size=10),\n      plot.margin = margin(0.5,0.3, 0.3, 0.3, \"cm\"),\n      # plot.title =element_textbox_simple(family=\"century gothic bold\", size=16,\n      #                                    lineheight=1,\n      #                                    margin=margin(b=10)),\n      # plot.title.position=\"plot\",\n      plot.caption=element_markdown(hjust=0, color=\"gray\",\n                                    lineheight=1.5,\n                                    margin =margin(t=10)),\n      plot.caption.position=\"plot\",\n      axis.title.y=element_text(color=\"black\", angle=90, size = 10),\n      axis.title.x=element_text(color=\"black\",size = 10),\n      axis.text.x=element_text(color=\"black\", size = 10, vjust = 0, margin = margin(t = 5, r = 5, b = 0, l = 0, unit = \"pt\")),\n      axis.text.y=element_text(color=\"black\", size = 10, hjust = 1, margin = margin(t = 5, r = 5, b = 0, l = 0, unit = \"pt\")),\n      legend.text=element_text(color=\"black\",  size = 10),\n      panel.grid.major.y=element_line(color=\"gray\", size=0.25),\n      panel.grid.major.x=element_blank(),\n      panel.grid.minor=element_blank(),\n      panel.background=element_rect(fill=\"white\", color=NA),\n      plot.background=element_rect(fill=\"white\", color=NA),\n      legend.background=element_rect(fill=\"white\", color=NA),\n     strip.background =element_rect(fill=\"white\",  color=NA),\n     strip.text = element_text( size = 20,  margin = margin(t = 5, r = 0, b = 10, l = 0, unit = \"pt\"))\n    )\n}\n\n# this will make the labels of the bar chart a bit nicer, by ending above the highest data point\nnicelimits <- function(x) {\n  range(scales::extended_breaks(only.loose = TRUE)(x))\n}\n\n\n# Define color palette\nnational_color <- \"#27A0CC\"\nurban_color <- \"#871A5B\"\nrural_color <- \"#22D0B6\"\nmale_color <- \"#206095\"\nfemale_color <- \"#F66068\"\nnegative_color <- \"#cc3333\"\npositive_color <- \"#33cccc\"\nneutral_color_scheme  <- c(\"#002060\", \"#0070C0\", \"#00B0F0\", \"#8EA9DB\", \"#9BC2E6\", \"#2C7FB8\")\nposneg_color_scheme  <- c(\"#38761D\",\"#6AA84F\",\"#93C47D\",\"#F4CCCC\",\"#E06666\",\"#990000\")\nposneutralneg_color_scheme  <- c(\"#38761D\",\"#6AA84F\",\"#FFFFCC\",\"#E06666\",\"#990000\")\npopulation_color_scheme  <- c(\"#FFFFCC\",\"#C7E9B4\",\"#7FCDBB\",\"#41B6C4\",\"#2C7FB8\")\nincidence_color_scheme  <- c(\"#FECCCC\",\"#FF9999\",\"#FF6666\",\"#FF3333\",\"#CC0000\",\"#990000\")\nstatscolours_color_scheme  <- c(\"#382873\", \"#0168C8\", \"#00B050\")\nmalefemale_color_scheme <- c(\"#27A0CC\", \"#206095\", \"#F66068\")\nurbanrural_color_scheme  <- c(\"#27A0CC\", \"#871A5B\", \"#22D0B6\")\n```\n:::\n\n\n## Bar charts\n\nA bar chart is an effective way to visually represent data that is categorical or discrete in nature for example different regions in Ghana). It is particularly useful when comparing values across different categories or groups. Bar charts are ideal for showing the distribution or frequency of data, as well as identifying trends or patterns over time. They can be used to display numerical data such as quantities, percentages, and proportions. Overall, a bar chart is appropriate when you want to easily compare different categories or groups and understand the relative differences between them.\n\n\n### example data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn_chopbars_df  <- tribble(~region_number, ~region, ~number_of_chop_bars, ~urban, ~rural,\n                            1,\"Western\", 567, 300, 267,\n                            2, \"Central\", 907, 600, 307,\n                            3, \"Greater Accra\", 6990, 4792, 2198, \n                            4, \"Volta\", 278, 78, 200, \n                            5, \"Eastern\", 787, 287, 500,\n                            6, \"Ashanti\",5621, 621, 5000,\n                            7, \"Western North\", 345, 145, 200,\n                            8,\t\"Ahafo\", 678, 339, 339,\n                            9, \"Bono\",1268, 600, 668, \n                            10,\"Bono East\", 1268,1048, 220,\n                            11,\"Oti\",773, 500, 273, \n                            12,\"Northern\", 112, 12, 100,\n                            13,\"Savannah\", 1289,503, 786, \n                            14,\"North East\",378, 142, 236,\n                            15,\"Upper East\",1279,326, 953, \n                            16,\t\"Upper West\", 3782, 3456, 326) \n\nn_chopbars_df %>%\n\tkable() %>%\n\tkable_styling() %>% \n  scroll_box(height = \"400px\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; \"><table class=\"table table-striped table-hover table-condensed table-responsive\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> region_number </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> region </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> number_of_chop_bars </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> urban </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> rural </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> Western </td>\n   <td style=\"text-align:right;\"> 567 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:right;\"> 267 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:left;\"> Central </td>\n   <td style=\"text-align:right;\"> 907 </td>\n   <td style=\"text-align:right;\"> 600 </td>\n   <td style=\"text-align:right;\"> 307 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:left;\"> Greater Accra </td>\n   <td style=\"text-align:right;\"> 6990 </td>\n   <td style=\"text-align:right;\"> 4792 </td>\n   <td style=\"text-align:right;\"> 2198 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:left;\"> Volta </td>\n   <td style=\"text-align:right;\"> 278 </td>\n   <td style=\"text-align:right;\"> 78 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:left;\"> Eastern </td>\n   <td style=\"text-align:right;\"> 787 </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:left;\"> Ashanti </td>\n   <td style=\"text-align:right;\"> 5621 </td>\n   <td style=\"text-align:right;\"> 621 </td>\n   <td style=\"text-align:right;\"> 5000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:left;\"> Western North </td>\n   <td style=\"text-align:right;\"> 345 </td>\n   <td style=\"text-align:right;\"> 145 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 8 </td>\n   <td style=\"text-align:left;\"> Ahafo </td>\n   <td style=\"text-align:right;\"> 678 </td>\n   <td style=\"text-align:right;\"> 339 </td>\n   <td style=\"text-align:right;\"> 339 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 9 </td>\n   <td style=\"text-align:left;\"> Bono </td>\n   <td style=\"text-align:right;\"> 1268 </td>\n   <td style=\"text-align:right;\"> 600 </td>\n   <td style=\"text-align:right;\"> 668 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:left;\"> Bono East </td>\n   <td style=\"text-align:right;\"> 1268 </td>\n   <td style=\"text-align:right;\"> 1048 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 11 </td>\n   <td style=\"text-align:left;\"> Oti </td>\n   <td style=\"text-align:right;\"> 773 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:right;\"> 273 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:left;\"> Northern </td>\n   <td style=\"text-align:right;\"> 112 </td>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:right;\"> 100 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 13 </td>\n   <td style=\"text-align:left;\"> Savannah </td>\n   <td style=\"text-align:right;\"> 1289 </td>\n   <td style=\"text-align:right;\"> 503 </td>\n   <td style=\"text-align:right;\"> 786 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 14 </td>\n   <td style=\"text-align:left;\"> North East </td>\n   <td style=\"text-align:right;\"> 378 </td>\n   <td style=\"text-align:right;\"> 142 </td>\n   <td style=\"text-align:right;\"> 236 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 15 </td>\n   <td style=\"text-align:left;\"> Upper East </td>\n   <td style=\"text-align:right;\"> 1279 </td>\n   <td style=\"text-align:right;\"> 326 </td>\n   <td style=\"text-align:right;\"> 953 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 16 </td>\n   <td style=\"text-align:left;\"> Upper West </td>\n   <td style=\"text-align:right;\"> 3782 </td>\n   <td style=\"text-align:right;\"> 3456 </td>\n   <td style=\"text-align:right;\"> 326 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\n\n\n### One Color\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Pipe operator to pass data frame to the next line\nn_chopbars_df %>% \n  # Create a ggplot object and set the aesthetic mappings\n  ggplot(mapping = aes(x = region, y = number_of_chop_bars)) +\n  # Add a column chart with bars of equal width\n  geom_col(width = 0.8) +\n  # Apply a custom theme to the plot\n  gssthemes() +\n# The expand argument controls whether the range of the y-axis is expanded to include a small margin around the data. The limits argument sets the upper and lower limits of the y-axis to nicelimits, which is a function that makes sure the limits are always above the largest data point. he breaks argument sets the tick marks on the y-axis to use extended_breaks from the scales package, which generates a sequence of evenly spaced values with loose spacing.\n  scale_y_continuous( expand = c( 0, 1 ),\n                      limits = nicelimits,\n  \t\t\t\t\t\t\t\t\t\tlabels = scales::comma,\n                      breaks = scales::extended_breaks(only.loose = TRUE)) +\n\t# Set the scale for the x-axis with tick labels rotated by 90 degrees\n  scale_x_discrete(guide = guide_axis(angle = 90)) +\n\t # Add axis labels to the plot\n\tlabs(x = NULL,\n\t\t\t y = \"number of chop bars\")+\n\t# Set the coordinate system for the plot, allowing data points to be partially displayed outside of the plot area.\n  coord_cartesian(clip = \"off\")\n```\n\n::: {.cell-output-display}\n![](graphics-guide/www/images/barplot-normal-1.png){width=768}\n:::\n:::\n\n\n### One Color (Rotated) with labels \n\nThis example introduces `coord_flip()` instead of `coord_cartesian()` and bring back some theme elements to draw vertical instead of horizontal grid lines. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Pipe operator to pass data frame to the next line\nn_chopbars_df %>% \n  # Create a ggplot object and set the aesthetic mappings\n  ggplot(mapping = aes(x = region, y = number_of_chop_bars)) +\n  # Add a column chart with bars of equal width\n  geom_col(width = 0.8) +\n\t# add text to the end of the plot\n\t geom_text(mapping = aes(label = number_of_chop_bars), hjust = -1) +\n  # Apply a custom theme to the plot\n  gssthemes() +\n\t# The expand argument controls whether the range of the y-axis is expanded to include a small margin around the data. \n\t# The limits argument sets the upper and lower limits of the y-axis to nicelimits, which is a function that makes sure \n\t# the limits are always above the largest data point. he breaks argument sets the tick marks on the y-axis to use\n\t# extended_breaks from the scales package, which generates a sequence of evenly spaced values with loose spacing.\n  scale_y_continuous( expand = c( 0, 1 ),\n                      limits = nicelimits,\n  \t\t\t\t\t\t\t\t\t\tlabels = scales::comma,\n                      breaks = scales::extended_breaks(only.loose = TRUE)) +\n\t# Add axis labels to the plot\n\tlabs(x = NULL,\n\t\t\t y = \"number of chop bars\")+\n\t# Set the coordinate system for the plot, allowing data points to be partially displayed outside of the plot area.\n  coord_flip(clip = \"off\") +\n\t# change the theme a bit so that 1) the axis lines are vertical and 2) the labels are right alligend\n\ttheme(panel.grid.major.x=element_line(color = \"gray\", size=0.25),\n\t\t\t\tpanel.grid.major.y=element_blank(),\n\t\t\t\taxis.text.x = element_text(vjust = 0.5))\n```\n\n::: {.cell-output-display}\n![](graphics-guide/www/images/unnamed-chunk-3-1.png){width=768}\n:::\n:::\n\n\n### One Color (Rotated) with labels and ordered\n\nYou can use the `reorder()` function to order the axis labels.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Pipe operator to pass data frame to the next line\nn_chopbars_df %>% \n  # Create a ggplot object and set the aesthetic mappings\n\t# use the reorder function to reorder the the bars\n  ggplot(mapping = aes(x = reorder(region,number_of_chop_bars), y = number_of_chop_bars)) +\n  # Add a column chart with bars of equal width\n  geom_col(width = 0.8) +\n\t# add text to the end of the plot, and comma at all thousands\n\t geom_text(mapping = aes(label = scales::comma(number_of_chop_bars)), hjust = -1,) +\n  # Apply a custom theme to the plot\n  gssthemes() +\n\t# The expand argument controls whether the range of the y-axis is expanded to include a small margin around the data. \n\t# The limits argument sets the upper and lower limits of the y-axis to nicelimits, which is a function that makes sure \n\t# the limits are always above the largest data point. he breaks argument sets the tick marks on the y-axis to use\n\t# extended_breaks from the scales package, which generates a sequence of evenly spaced values with loose spacing.\n  scale_y_continuous( expand = c( 0, 1 ),\n                      limits = nicelimits,\n  \t\t\t\t\t\t\t\t\t\tlabels = scales::comma,\n                      breaks = scales::extended_breaks(only.loose = TRUE)) +\n\t# Add axis labels to the plot\n\tlabs(x = NULL,\n\t\t\t y = \"number of chop bars\")+\n\t# Set the coordinate system for the plot, allowing data points to be partially displayed outside of the plot area.\n  coord_flip(clip = \"off\") +\n\t# change the theme a bit so that 1) the axis lines are vertical and 2) the labels are right alligend\n\ttheme(panel.grid.major.x=element_line(color = \"gray\", size=0.25),\n\t\t\t\tpanel.grid.major.y=element_blank(),\n\t\t\t\taxis.text.x = element_text(vjust = 0.5))\n```\n\n::: {.cell-output-display}\n![](graphics-guide/www/images/barplot-rotated-ordered-1.png){width=768}\n:::\n:::\n\n\n\n\n### Show different categories using color palettes (stacked)\n\nIf you want to show different categories, you can use the `fill = categorical variable` argument inside the aesthetics mapping. To do this, the data needs to be in a long format\n\n#### example data (long format)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn_chopbars_df_longformat <- n_chopbars_df %>% \n\tselect(-number_of_chop_bars ) %>% \n\tpivot_longer(-c(region_number, region), names_to = \"locality\", values_to = \"number_of_chop_bars\")\n\nn_chopbars_df_longformat %>%\n\tkable() %>%\n\tkable_styling() %>% \n  scroll_box(height = \"400px\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; \"><table class=\"table table-striped table-hover table-condensed table-responsive\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> region_number </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> region </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> locality </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> number_of_chop_bars </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> Western </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 300 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> Western </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 267 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:left;\"> Central </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 600 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:left;\"> Central </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 307 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:left;\"> Greater Accra </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 4792 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:left;\"> Greater Accra </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 2198 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:left;\"> Volta </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 78 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:left;\"> Volta </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 200 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:left;\"> Eastern </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 287 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:left;\"> Eastern </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 500 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:left;\"> Ashanti </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 621 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:left;\"> Ashanti </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 5000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:left;\"> Western North </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 145 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:left;\"> Western North </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 200 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 8 </td>\n   <td style=\"text-align:left;\"> Ahafo </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 339 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 8 </td>\n   <td style=\"text-align:left;\"> Ahafo </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 339 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 9 </td>\n   <td style=\"text-align:left;\"> Bono </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 600 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 9 </td>\n   <td style=\"text-align:left;\"> Bono </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 668 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:left;\"> Bono East </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 1048 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:left;\"> Bono East </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 220 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 11 </td>\n   <td style=\"text-align:left;\"> Oti </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 500 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 11 </td>\n   <td style=\"text-align:left;\"> Oti </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 273 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:left;\"> Northern </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 12 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:left;\"> Northern </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 100 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 13 </td>\n   <td style=\"text-align:left;\"> Savannah </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 503 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 13 </td>\n   <td style=\"text-align:left;\"> Savannah </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 786 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 14 </td>\n   <td style=\"text-align:left;\"> North East </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 142 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 14 </td>\n   <td style=\"text-align:left;\"> North East </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 236 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 15 </td>\n   <td style=\"text-align:left;\"> Upper East </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 326 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 15 </td>\n   <td style=\"text-align:left;\"> Upper East </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 953 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 16 </td>\n   <td style=\"text-align:left;\"> Upper West </td>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 3456 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 16 </td>\n   <td style=\"text-align:left;\"> Upper West </td>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 326 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nn_chopbars_df_longformat %>% \n  ggplot(mapping = aes(x = reorder(region,number_of_chop_bars), fill = locality ,  y = number_of_chop_bars)) +\n  geom_col(width = 0.8) +\n  gssthemes() +\n  scale_y_continuous( expand = c( 0, 1 ),\n                      limits = nicelimits,\n  \t\t\t\t\t\t\t\t\t\tlabels = scales::comma,\n                      breaks = scales::extended_breaks(only.loose = TRUE)) +\n\tlabs(x = NULL,\n\t\t\t y = \"number of chop bars\")+\n  coord_flip(clip = \"off\") +\n\tscale_fill_manual(values = c(urban = urban_color,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t rural = rural_color))+\n\ttheme(panel.grid.major.x=element_line(color = \"gray\", size=0.25),\n\t\t\t\tpanel.grid.major.y=element_blank(),\n\t\t\t\taxis.text.x = element_text(vjust = 0.5))\n```\n\n::: {.cell-output-display}\n![](graphics-guide/www/images/unnamed-chunk-5-1.png){width=768}\n:::\n:::\n\n\n\n### Show different categories using color palettes (dodged)\n\nInstead of having the categories stacked, you can put them next to each other (stacked)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn_chopbars_df_longformat %>% \n  ggplot(mapping = aes(x = reorder(region,number_of_chop_bars), fill = locality ,  y = number_of_chop_bars)) +\n  geom_col(width = 0.8, position = \"dodge\") +\n\tgeom_text(mapping = aes(label = scales::comma(number_of_chop_bars)), hjust = -1, \n\t\t\t\t\t\tposition = position_dodge(width = 0.8)) +\n  gssthemes() +\n  scale_y_continuous( expand = c( 0, 0 ),\n                      limits = nicelimits,\n  \t\t\t\t\t\t\t\t\t\tlabels = scales::comma,\n                      breaks = scales::extended_breaks(only.loose = TRUE)) +\n\tlabs(x = NULL,\n\t\t\t y = \"number of chop bars\")+\n  coord_flip(clip = \"off\") +\n\tscale_fill_manual(values = c(urban = urban_color,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t rural = rural_color))+\n\ttheme(panel.grid.major.x=element_line(color = \"gray\", size=0.25),\n\t\t\t\tpanel.grid.major.y=element_blank(),\n\t\t\t\taxis.text.x = element_text(vjust = 0.5))\n```\n\n::: {.cell-output-display}\n![](graphics-guide/www/images/unnamed-chunk-6-1.png){width=768}\n:::\n:::\n\n\n\n\n### Bar chart with highlighted category\n\nSometimes you might want to highlight a single category in a bar chart (for example the National/Ghana average). To highlight also the axis label you need to use the `showtext` package. It is recommended to put highlight is a similar hue than the other colours. This can be done, using the `muted()` function from the `scales` package\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# this code add the Ghana average\nn_chopbars_df_with_national <- n_chopbars_df %>% \n\tadd_row( region_number = 0,\n\t\t\t\t\t\t region  = \"Ghana\",\n\t\t\t\t\t\t number_of_chop_bars = mean(n_chopbars_df$number_of_chop_bars),\n\t\t\t\t\t\t urban = mean(n_chopbars_df$urban ),\n\t\t\t\t\t\t rural= mean(n_chopbars_df$rural) )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhighlight = function(x, pat, color=\"black\", family=\"\") {\n\tifelse(grepl(pat, x), glue(\"<b style='font-family:{family}; color:{color}'>{x}</b>\"), x)\n}\n\n# Pipe operator to pass data frame to the next line\nn_chopbars_df_with_national %>% \n\tmutate(highlight = region == \"Ghana\") %>% \n  # Create a ggplot object and set the aesthetic mappings\n\t# use the reorder function to reorder the the bars\n  ggplot(mapping = aes(x = reorder(region,number_of_chop_bars), \n  \t\t\t\t\t\t\t\t\t\t y = number_of_chop_bars,\n  \t\t\t\t\t\t\t\t\t\t  fill = highlight)) +\n  geom_col(width = 0.8) +\n\tgeom_text(mapping = aes(label = scales::comma(number_of_chop_bars)), hjust = -1) +\n  gssthemes() +\n  scale_y_continuous( expand = c( 0, 0 ),\n                      limits = nicelimits,\n  \t\t\t\t\t\t\t\t\t\tlabels = scales::comma,\n                      breaks = scales::extended_breaks(only.loose = TRUE)) +\n\tscale_x_discrete(labels= function(x) highlight(x, \"Ghana\", \"black\")) +\n\tscale_fill_manual(values = c(`FALSE` = national_color, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t `TRUE` = scales::muted(national_color)),\n\t\t\t\t\t\t\t\t\t\tguide = \"none\") +\n\tlabs(x = NULL,\n\t\t\t y = \"number of chop bars\" )+\n  coord_flip(clip = \"off\") +\n\ttheme(panel.grid.major.x = element_line(color = \"gray\", size=0.25),\n\t\t\t\tpanel.grid.major.y = element_blank(),\n\t\t\t\taxis.text.x = element_text(vjust = 0.5),\n\t\t\t\taxis.text.y = element_markdown()) # to make this work you need to make the y axis a markdown format\n```\n\n::: {.cell-output-display}\n![](graphics-guide/www/images/unnamed-chunk-8-1.png){width=768}\n:::\n:::\n\n\n### Bar chart with long labels\n\nTo allow for sufficient plotting space, it is a good idea to add line break to long value labels on the axes. You can use the `str_wrap()` function to add line breaks\n\n#### example data (long labels)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn_chopbars_df_long_labels  <- tribble(~question, ~count, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"number of households eating at chopbars every day\", 678,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"number of male headed households eating at chopbars once a week\", 1267,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"number of female headed households eating at chop bars once a week\", 1876)\nn_chopbars_df_long_labels %>%\n\tkable() %>%\n\tkable_styling()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-hover table-condensed table-responsive\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> question </th>\n   <th style=\"text-align:right;\"> count </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> number of households eating at chopbars every day </td>\n   <td style=\"text-align:right;\"> 678 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> number of male headed households eating at chopbars once a week </td>\n   <td style=\"text-align:right;\"> 1267 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> number of female headed households eating at chop bars once a week </td>\n   <td style=\"text-align:right;\"> 1876 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nn_chopbars_df_long_labels %>% \n  ggplot(mapping = aes(x = str_wrap(question, 20), y = count)) +\n  geom_col(width = 0.8) +\n\t geom_text(mapping = aes(label = count), hjust = -1) +\n  gssthemes() +\n  scale_y_continuous( expand = c( 0, 1 ),\n                      limits = nicelimits,\n  \t\t\t\t\t\t\t\t\t\tlabels = scales::comma,\n                      breaks = scales::extended_breaks(only.loose = TRUE)) +\n\tlabs(x = NULL,\n\t\t\t y = \"number of chop bars\")+\n  coord_flip(clip = \"off\") +\n\ttheme(panel.grid.major.x=element_line(color = \"gray\", size=0.25),\n\t\t\t\tpanel.grid.major.y=element_blank())\n```\n\n::: {.cell-output-display}\n![](graphics-guide/www/images/unnamed-chunk-10-1.png){width=768}\n:::\n:::\n\n\n\n### Diverging Bar chart\n\nA diverging bar chart is a type of data visualization that displays values of a quantitative variable across two or more categories, where the bars are centered on a common baseline or a central axis. This type of chart is particularly useful for comparing differences in values that can have both positive and negative magnitudes, or when illustrating a relationship between two opposing factors or sentiments.\n\nIn a diverging bar chart, the bars extend in opposite directions from the central axis, creating a symmetrical pattern. This layout makes it easy to see the differences between categories and to identify patterns and trends within the data.\n\nWhen choosing a diverging bar chart, make sure it is appropriate for your dataset and the type of information you want to convey. It is important to note that diverging bar charts may not be suitable for all types of data, especially if the differences between categories are not symmetrical or if the data has no clear central point. In such cases, other visualization methods, like standard bar charts or line charts, might be more suitable.\n\n\n#### example data (positive and negative values)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nchange_in_chop_bars_df <- tribble(~region_number, ~region, ~change,\n                            1,\"Western\", -.35, \n                            2, \"Central\", -.26, \n                            3, \"Greater Accra\", .67,\n                            4, \"Volta\", -.18, \n                            5, \"Eastern\", .47, \n                            6, \"Ashanti\",.56, \n                            7, \"Western North\", -.2,\n                            8,\t\"Ahafo\", .61, \n                            9, \"Bono\",.12,\n                            10,\"Bono East\", 0.01,\n                            11,\"Oti\",.07,\n                            12,\"Northern\", .11,\n                            13,\"Savannah\", .12,\n                            14,\"North East\",-.31,\n                            15,\"Upper East\",0,\n                            16,\t\"Upper West\", .265)\n\nchange_in_chop_bars_df %>% \n\tkable() %>%\n\tkable_styling() %>% \n  scroll_box(height = \"400px\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; \"><table class=\"table table-striped table-hover table-condensed table-responsive\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> region_number </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> region </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> change </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> Western </td>\n   <td style=\"text-align:right;\"> -0.350 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:left;\"> Central </td>\n   <td style=\"text-align:right;\"> -0.260 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:left;\"> Greater Accra </td>\n   <td style=\"text-align:right;\"> 0.670 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:left;\"> Volta </td>\n   <td style=\"text-align:right;\"> -0.180 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:left;\"> Eastern </td>\n   <td style=\"text-align:right;\"> 0.470 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:left;\"> Ashanti </td>\n   <td style=\"text-align:right;\"> 0.560 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:left;\"> Western North </td>\n   <td style=\"text-align:right;\"> -0.200 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 8 </td>\n   <td style=\"text-align:left;\"> Ahafo </td>\n   <td style=\"text-align:right;\"> 0.610 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 9 </td>\n   <td style=\"text-align:left;\"> Bono </td>\n   <td style=\"text-align:right;\"> 0.120 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:left;\"> Bono East </td>\n   <td style=\"text-align:right;\"> 0.010 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 11 </td>\n   <td style=\"text-align:left;\"> Oti </td>\n   <td style=\"text-align:right;\"> 0.070 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:left;\"> Northern </td>\n   <td style=\"text-align:right;\"> 0.110 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 13 </td>\n   <td style=\"text-align:left;\"> Savannah </td>\n   <td style=\"text-align:right;\"> 0.120 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 14 </td>\n   <td style=\"text-align:left;\"> North East </td>\n   <td style=\"text-align:right;\"> -0.310 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 15 </td>\n   <td style=\"text-align:left;\"> Upper East </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 16 </td>\n   <td style=\"text-align:left;\"> Upper West </td>\n   <td style=\"text-align:right;\"> 0.265 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nchange_in_chop_bars_df %>% \n\tmutate(pos_neg = ifelse(change >0, \"positive\", \"negative\")) %>% \n\tggplot(aes(x = reorder(region, change),\n\t\t\t\t\t\t y = change,\n\t\t\t\t\t\t fill =pos_neg)) +\n  geom_col() +\n  gssthemes() +\n\t\tscale_fill_manual(values = c(positive = positive_color,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t negative = negative_color))+ \n  scale_y_continuous(labels = scales::percent) +\n\tlabs(x = NULL,\n\t\t\t y = \"change in number\\nof chop bars\")+\n  coord_flip(clip = \"off\") +\n\ttheme(panel.grid.major.x=element_line(color = \"gray\", size=0.25),\n\t\t\t\tpanel.grid.major.y=element_blank(),\n\t\t\t\taxis.text.x = element_text(vjust = 0.5),\n\t\t\t\tlegend.position = \"none\") +\n\t  geom_hline(yintercept = 0, linetype = \"dashed\", color = \"black\")\n```\n\n::: {.cell-output-display}\n![](graphics-guide/www/images/unnamed-chunk-12-1.png){width=768}\n:::\n:::\n\n\n\n### Filled bar chart with from positive to negative\n\nYou can use a filled bar chart to show relative shares within a group. This example shows the percentage of different opininions.\n\n#### example data (sentiment data)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsentiment_chop_bars <- tribble(~location, ~ `very positive`, ~ `positive`, ~  `neutral`,  ~ `negative`, ~\"very negative\",\n\t\t\t\t\"urban\", 15.2, 17.3, 50.2, 8, 9.3,\n\t\t\t\t\"rural\"\t, 25.2,34.2,31.2,6,3.4,\n\t\t\t\t\"national\", 20.2,25.75, 40.7,7,6.35)\n\nsentiment_chop_bars %>% \n\t\tkable() %>%\n\tkable_styling() \n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-hover table-condensed table-responsive\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> location </th>\n   <th style=\"text-align:right;\"> very positive </th>\n   <th style=\"text-align:right;\"> positive </th>\n   <th style=\"text-align:right;\"> neutral </th>\n   <th style=\"text-align:right;\"> negative </th>\n   <th style=\"text-align:right;\"> very negative </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> urban </td>\n   <td style=\"text-align:right;\"> 15.2 </td>\n   <td style=\"text-align:right;\"> 17.30 </td>\n   <td style=\"text-align:right;\"> 50.2 </td>\n   <td style=\"text-align:right;\"> 8 </td>\n   <td style=\"text-align:right;\"> 9.30 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> rural </td>\n   <td style=\"text-align:right;\"> 25.2 </td>\n   <td style=\"text-align:right;\"> 34.20 </td>\n   <td style=\"text-align:right;\"> 31.2 </td>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:right;\"> 3.40 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> national </td>\n   <td style=\"text-align:right;\"> 20.2 </td>\n   <td style=\"text-align:right;\"> 25.75 </td>\n   <td style=\"text-align:right;\"> 40.7 </td>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:right;\"> 6.35 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsentiment_chop_bars %>%\n\tpivot_longer(-location, names_to = \"sentiment\") %>%\n\tmutate(percent = value / 100) %>%\n\t# make sure the sentiment labels are factors so that they can be ordered correctly\n\tmutate(sentiment = factor(\n\t\tsentiment,\n\t\tlevels = c(\n\t\t\t\"very positive\",\n\t\t\t\"positive\",\n\t\t\t\"neutral\",\n\t\t\t\"negative\",\n\t\t\t\"very negative\"\n\t\t)\n\t)) %>%\n\tggplot(aes(x = location, y = percent, fill = sentiment)) +\n\tgeom_col(width = 0.8, position = \"stack\") +\n\tgssthemes() +\n\tscale_y_continuous(labels = scales::percent,\n\t\t\t\t\t\t\t\t\t\t expand = c(0, 0)) +\n\tlabs(x = NULL,\n\t\t\t y = \"percentage\",\n\t\t\t fill = \"opinion on chop bars\") +\n\tcoord_flip(clip = \"off\") +\n\tscale_fill_manual(values = posneutralneg_color_scheme) +\n\ttheme(\n\t\tpanel.grid.major.x = element_line(color = \"gray\", size = 0.25),\n\t\tpanel.grid.major.y = element_blank(),\n\t\tlegend.position = \"top\"\n\t) +\n\tguides(fill = guide_legend(\n\t\tnrow = 2,\n\t\tbyrow = TRUE,\n\t\ttitle.position = \"top\"\n\t))\n```\n\n::: {.cell-output-display}\n![](graphics-guide/www/images/unnamed-chunk-14-1.png){width=768}\n:::\n:::\n\n\n\n### multiple plots next to each other using `facet_wrap()`\n\nR's faceting system is a powerful way to make \"small multiples\". \n\n\n::: {.cell}\n\n```{.r .cell-code}\nn_chopbars_df_longformat %>% \n  ggplot(mapping = aes(x = reorder(region,number_of_chop_bars), fill = locality ,  y = number_of_chop_bars)) +\n  geom_col(width = 0.8, position = \"dodge\") +\n\tgeom_text(mapping = aes(label = scales::comma(number_of_chop_bars)), hjust = -1, \n\t\t\t\t\t\tposition = position_dodge(width = 0.8)) +\n\n  gssthemes() +\n  scale_y_continuous( expand =c(0,NA),\n  \t\t\t\t\t\t\t\t\t\tlimits = c(0, 7000),\n  \t\t\t\t\t\t\t\t\t\tlabels = scales::comma,\n                      breaks = scales::extended_breaks(only.loose = TRUE)) +\n\tlabs(x = NULL,\n\t\t\t y = \"number of chop bars\")+\n  coord_flip(clip = \"off\") +\n\tscale_fill_manual(values = c(urban = urban_color,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t rural = rural_color))+\n\ttheme(panel.grid.major.x=element_line(color = \"gray\", size=0.25),\n\t\t\t\tpanel.grid.major.y=element_blank(),\n\t\t\t\tlegend.position = \"none\") +\n\t# use the facet_wrap function to make small multiples\n\tfacet_wrap(~locality)\n```\n\n::: {.cell-output-display}\n![](graphics-guide/www/images/unnamed-chunk-15-1.png){width=768}\n:::\n:::\n\n\n\n### multiple plots next to each other with separate bar legends\n\n\nSometimes using facet_wrap is not sufficient, especially if you want to add different legends to sub-plots, but still want to align different axis of plots into a single plots. To do this you can create 3 seperate plots and merge them using the `patchwork` package\n\n#### example data (long format with quarters)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn_chopbars_df_region_quarters  <- tribble(~region_number, ~region, ~national, ~urban, ~rural, ~quarter,\n1,\"Western\", 567, 300, 267, \"Q1\",\n2, \"Central\", 907, 600, 307,\"Q1\",\n3, \"Greater Accra\", 6990, 4792, 2198, \"Q1\",\n4, \"Volta\", 278, 78, 200, \"Q1\",\n5, \"Eastern\", 787, 287, 500,\"Q1\",\n6, \"Ashanti\",5621, 621, 5000,\"Q1\",\n7, \"Western North\", 345, 145, 200,\"Q1\",\n8,\t\"Ahafo\", 678, 339, 339,\"Q1\",\n9, \"Bono\",1268, 600, 668, \"Q1\",\n10,\"Bono East\", 1268,1048, 220,\"Q1\",\n11,\"Oti\",773, 500, 273, \"Q1\",\n12,\"Northern\", 112, 12, 100,\"Q1\",\n13,\"Savannah\", 1289,503, 786, \"Q1\",\n14,\"North East\",378, 142, 236,\"Q1\",\n15,\"Upper East\",1279,326, 953, \"Q1\",\n16,\t\"Upper West\", 3782, 3456, 326, \"Q1\",\n1,\"Western\", 602, 302, 300, \"Q2\",\n2, \"Central\", 1000, 600, 400,\"Q2\",\n3, \"Greater Accra\", 7990, 4792, 3198, \"Q2\",\n4, \"Volta\", 346, 93, 253, \"Q2\",\n5, \"Eastern\", 887, 387, 500,\"Q2\",\n6, \"Ashanti\",6000, 2000, 4000,\"Q2\",\n7, \"Western North\", 445, 195, 250,\"Q2\",\n8,\t\"Ahafo\", 701, 339, 362,\"Q2\",\n9, \"Bono\",1444, 722, 722, \"Q2\",\n10,\"Bono East\", 1368,1048, 290,\"Q2\",\n11,\"Oti\",912, 534, 378, \"Q2\",\n12,\"Northern\", 122, 17, 105,\"Q2\",\n13,\"Savannah\", 1289,503, 786, \"Q2\",\n14,\"North East\",534, 182, 352,\"Q2\",\n15,\"Upper East\",1510,400, 1110, \"Q2\",\n16,\t\"Upper West\", 3991, 3496, 495, \"Q2\")\n\n\nn_chopbars_df_region_quarters %>% \n\tkable() %>%\n\tkable_styling() %>% \n  scroll_box(height = \"400px\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<div style=\"border: 1px solid #ddd; padding: 0px; overflow-y: scroll; height:400px; \"><table class=\"table table-striped table-hover table-condensed table-responsive\" style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> region_number </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> region </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> national </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> urban </th>\n   <th style=\"text-align:right;position: sticky; top:0; background-color: #FFFFFF;\"> rural </th>\n   <th style=\"text-align:left;position: sticky; top:0; background-color: #FFFFFF;\"> quarter </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> Western </td>\n   <td style=\"text-align:right;\"> 567 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:right;\"> 267 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:left;\"> Central </td>\n   <td style=\"text-align:right;\"> 907 </td>\n   <td style=\"text-align:right;\"> 600 </td>\n   <td style=\"text-align:right;\"> 307 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:left;\"> Greater Accra </td>\n   <td style=\"text-align:right;\"> 6990 </td>\n   <td style=\"text-align:right;\"> 4792 </td>\n   <td style=\"text-align:right;\"> 2198 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:left;\"> Volta </td>\n   <td style=\"text-align:right;\"> 278 </td>\n   <td style=\"text-align:right;\"> 78 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:left;\"> Eastern </td>\n   <td style=\"text-align:right;\"> 787 </td>\n   <td style=\"text-align:right;\"> 287 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:left;\"> Ashanti </td>\n   <td style=\"text-align:right;\"> 5621 </td>\n   <td style=\"text-align:right;\"> 621 </td>\n   <td style=\"text-align:right;\"> 5000 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:left;\"> Western North </td>\n   <td style=\"text-align:right;\"> 345 </td>\n   <td style=\"text-align:right;\"> 145 </td>\n   <td style=\"text-align:right;\"> 200 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 8 </td>\n   <td style=\"text-align:left;\"> Ahafo </td>\n   <td style=\"text-align:right;\"> 678 </td>\n   <td style=\"text-align:right;\"> 339 </td>\n   <td style=\"text-align:right;\"> 339 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 9 </td>\n   <td style=\"text-align:left;\"> Bono </td>\n   <td style=\"text-align:right;\"> 1268 </td>\n   <td style=\"text-align:right;\"> 600 </td>\n   <td style=\"text-align:right;\"> 668 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:left;\"> Bono East </td>\n   <td style=\"text-align:right;\"> 1268 </td>\n   <td style=\"text-align:right;\"> 1048 </td>\n   <td style=\"text-align:right;\"> 220 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 11 </td>\n   <td style=\"text-align:left;\"> Oti </td>\n   <td style=\"text-align:right;\"> 773 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:right;\"> 273 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:left;\"> Northern </td>\n   <td style=\"text-align:right;\"> 112 </td>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:right;\"> 100 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 13 </td>\n   <td style=\"text-align:left;\"> Savannah </td>\n   <td style=\"text-align:right;\"> 1289 </td>\n   <td style=\"text-align:right;\"> 503 </td>\n   <td style=\"text-align:right;\"> 786 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 14 </td>\n   <td style=\"text-align:left;\"> North East </td>\n   <td style=\"text-align:right;\"> 378 </td>\n   <td style=\"text-align:right;\"> 142 </td>\n   <td style=\"text-align:right;\"> 236 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 15 </td>\n   <td style=\"text-align:left;\"> Upper East </td>\n   <td style=\"text-align:right;\"> 1279 </td>\n   <td style=\"text-align:right;\"> 326 </td>\n   <td style=\"text-align:right;\"> 953 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 16 </td>\n   <td style=\"text-align:left;\"> Upper West </td>\n   <td style=\"text-align:right;\"> 3782 </td>\n   <td style=\"text-align:right;\"> 3456 </td>\n   <td style=\"text-align:right;\"> 326 </td>\n   <td style=\"text-align:left;\"> Q1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> Western </td>\n   <td style=\"text-align:right;\"> 602 </td>\n   <td style=\"text-align:right;\"> 302 </td>\n   <td style=\"text-align:right;\"> 300 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:left;\"> Central </td>\n   <td style=\"text-align:right;\"> 1000 </td>\n   <td style=\"text-align:right;\"> 600 </td>\n   <td style=\"text-align:right;\"> 400 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:left;\"> Greater Accra </td>\n   <td style=\"text-align:right;\"> 7990 </td>\n   <td style=\"text-align:right;\"> 4792 </td>\n   <td style=\"text-align:right;\"> 3198 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:left;\"> Volta </td>\n   <td style=\"text-align:right;\"> 346 </td>\n   <td style=\"text-align:right;\"> 93 </td>\n   <td style=\"text-align:right;\"> 253 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:left;\"> Eastern </td>\n   <td style=\"text-align:right;\"> 887 </td>\n   <td style=\"text-align:right;\"> 387 </td>\n   <td style=\"text-align:right;\"> 500 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:left;\"> Ashanti </td>\n   <td style=\"text-align:right;\"> 6000 </td>\n   <td style=\"text-align:right;\"> 2000 </td>\n   <td style=\"text-align:right;\"> 4000 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 7 </td>\n   <td style=\"text-align:left;\"> Western North </td>\n   <td style=\"text-align:right;\"> 445 </td>\n   <td style=\"text-align:right;\"> 195 </td>\n   <td style=\"text-align:right;\"> 250 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 8 </td>\n   <td style=\"text-align:left;\"> Ahafo </td>\n   <td style=\"text-align:right;\"> 701 </td>\n   <td style=\"text-align:right;\"> 339 </td>\n   <td style=\"text-align:right;\"> 362 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 9 </td>\n   <td style=\"text-align:left;\"> Bono </td>\n   <td style=\"text-align:right;\"> 1444 </td>\n   <td style=\"text-align:right;\"> 722 </td>\n   <td style=\"text-align:right;\"> 722 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 10 </td>\n   <td style=\"text-align:left;\"> Bono East </td>\n   <td style=\"text-align:right;\"> 1368 </td>\n   <td style=\"text-align:right;\"> 1048 </td>\n   <td style=\"text-align:right;\"> 290 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 11 </td>\n   <td style=\"text-align:left;\"> Oti </td>\n   <td style=\"text-align:right;\"> 912 </td>\n   <td style=\"text-align:right;\"> 534 </td>\n   <td style=\"text-align:right;\"> 378 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:left;\"> Northern </td>\n   <td style=\"text-align:right;\"> 122 </td>\n   <td style=\"text-align:right;\"> 17 </td>\n   <td style=\"text-align:right;\"> 105 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 13 </td>\n   <td style=\"text-align:left;\"> Savannah </td>\n   <td style=\"text-align:right;\"> 1289 </td>\n   <td style=\"text-align:right;\"> 503 </td>\n   <td style=\"text-align:right;\"> 786 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 14 </td>\n   <td style=\"text-align:left;\"> North East </td>\n   <td style=\"text-align:right;\"> 534 </td>\n   <td style=\"text-align:right;\"> 182 </td>\n   <td style=\"text-align:right;\"> 352 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 15 </td>\n   <td style=\"text-align:left;\"> Upper East </td>\n   <td style=\"text-align:right;\"> 1510 </td>\n   <td style=\"text-align:right;\"> 400 </td>\n   <td style=\"text-align:right;\"> 1110 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 16 </td>\n   <td style=\"text-align:left;\"> Upper West </td>\n   <td style=\"text-align:right;\"> 3991 </td>\n   <td style=\"text-align:right;\"> 3496 </td>\n   <td style=\"text-align:right;\"> 495 </td>\n   <td style=\"text-align:left;\"> Q2 </td>\n  </tr>\n</tbody>\n</table></div>\n\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nn_chopbars_df_region_quarters_longformat <- n_chopbars_df_region_quarters %>% \n\tpivot_longer(-c(region_number, region, quarter),\n\t\t\t\t\t\t\t names_to = \"locality\",\n\t\t\t\t\t\t\t values_to = \"number_of_chop_bars\"\n\t\t\t\t\t\t\t )\n\n\np_national <- n_chopbars_df_region_quarters_longformat %>% \n\tfilter(locality == \"national\") %>% \n\tggplot(mapping = aes(x     = reorder(region,desc(region_number)),\n\t\t\t\t\t\t\t\t\t\t\t y     = number_of_chop_bars)) +\n\tgeom_col(width = 0.8,\n\t\t\t\t\t aes( alpha = reorder(quarter, desc(quarter))),\n\t\t\t\t\t position =  position_dodge(width = 0.8),\n\t\t\t\t\t fill = national_color)+\n\tgeom_text(mapping = aes(label = scales::comma(number_of_chop_bars),\n\t\t\t\t\t\t\t\t\t\t\t\t\tgroup = reorder(quarter, desc(quarter))),\n\t\t\t\t\t\thjust = -1,\n\t\t\t\t\t\tposition = position_dodge(width = 0.8)\n\t) +\n\tgssthemes() +\n\tscale_y_continuous( limits = c(0, 10000),\n\t\t\t\t\t\t\t\t\t\t\tlabels = scales::comma) +\n\tscale_alpha_manual(values = seq(\n\t\tfrom = 0.5,\n\t\tto = 1,\n\t\tlength.out = 2\n\t),\n\tguide = guide_legend(reverse = TRUE))+\n\tlabs(x = NULL,\n\t\t\t alpha = NULL,\n\t\t\t y = \"number of chop bars\",\n\t\t\t title = \"National\")+\n\tcoord_flip(clip = \"off\") +\n\ttheme(panel.grid.major.x = element_line(color = \"gray\", size=0.25),\n\t\t\t\tpanel.grid.major.y = element_blank(),\n\t\t\t\tlegend.position = \"top\",\n\t\t\t\taxis.text.x = element_text(vjust = 0.5),\n\t\t\t\tplot.title=element_text(hjust=0.5),\n        plot.subtitle=element_text(hjust=0.5))\n\n\n\np_urban <- n_chopbars_df_region_quarters_longformat %>% \n\tfilter(locality == \"urban\") %>% \n\tggplot(mapping = aes(x     = reorder(region,desc(region_number)),\n\t\t\t\t\t\t\t\t\t\t\t y     = number_of_chop_bars,\n\t\t\t\t\t\t\t\t\t\t\t group = reorder(quarter, desc(quarter)))) +\n\tgeom_col(width = 0.8,\n\t\t\t\t\t aes( alpha = reorder(quarter, desc(quarter))),\n\t\t\t\t\t position = \"dodge\",\n\t\t\t\t\t fill = urban_color) +\n\tgeom_text(mapping = aes(label = scales::comma(number_of_chop_bars)), hjust = -1, \n\t\t\t\t\t\tposition = position_dodge(width = 0.8)) +\n\tgssthemes() +\n\tscale_y_continuous(\tlimits = c(0, 8000),\n\t\t\t\t\t\t\t\t\t\t\tlabels = scales::comma) +\n\tscale_alpha_manual(values = seq(\n\t\tfrom = 0.5,\n\t\tto = 1,\n\t\tlength.out = 2\n\t),\n\tguide = guide_legend(reverse = TRUE))+\n\tlabs(x = NULL,\n\t\t\t alpha = NULL,\n\t\t\t y = \"number of chop bars\",\n\t\t\t title = \"Urban\")+\n\tcoord_flip(clip = \"off\") +\n  # move the title text and subtitle text to the middle\n  theme(plot.title=element_text(hjust=0.5),\n        plot.subtitle=element_text(hjust=0.5),\n  \t\t\tpanel.grid.major.x = element_line(color = \"gray\", size=0.25),\n\t\t\t\tpanel.grid.major.y = element_blank(),\n\t\t\t\taxis.ticks.y= element_blank(),\t\t\t\t\n\t\t\t\tlegend.position = \"top\",\n\t\t\t\taxis.text.y = element_blank())\n\np_rural <- n_chopbars_df_region_quarters_longformat %>% \n\tfilter(locality == \"rural\") %>% \n\tggplot(mapping = aes(x     = reorder(region,desc(region_number)),\n\t\t\t\t\t\t\t\t\t\t\t y     = number_of_chop_bars,\n\t\t\t\t\t\t\t\t\t\t\t group = reorder(quarter, desc(quarter)))) +\n\tgeom_col(width = 0.8,\n\t\t\t\t\t aes( alpha = reorder(quarter, desc(quarter))),\n\t\t\t\t\t position = \"dodge\",\n\t\t\t\t\t fill = rural_color) +\n\tgeom_text(mapping = aes(label = scales::comma(number_of_chop_bars)), hjust = -1, \n\t\t\t\t\t\tposition = position_dodge(width = 0.8)) +\n\tgssthemes() +\n\tscale_y_continuous(\tlimits = c(0, 8000),\n\t\t\t\t\t\t\t\t\t\t\tlabels = scales::comma) +\n\tscale_alpha_manual(values = seq(\n\t\tfrom = 0.5,\n\t\tto = 1,\n\t\tlength.out = 2\n\t),\n\tguide = guide_legend(reverse = TRUE))+\n\tlabs(x = NULL,\n\t\t\t alpha = NULL,\n\t\t\t y = \"number of chop bars\",\n\t\t\t title = \"Rural\")+\n\tcoord_flip(clip = \"off\") +\n  # move the title text and subtitle text to the middle\n  theme(plot.title=element_text(hjust=0.5),\n        plot.subtitle=element_text(hjust=0.5),\n  \t\t\tpanel.grid.major.x = element_line(color = \"gray\", size=0.25),\n\t\t\t\tpanel.grid.major.y = element_blank(),\n\t\t\t\taxis.ticks.y= element_blank(),\t\t\t\t\n\t\t\t\tlegend.position = \"top\",\n\t\t\t\taxis.text.y = element_blank())\n\n\np_national + p_urban + p_rural\n```\n\n::: {.cell-output-display}\n![](graphics-guide/www/images/unnamed-chunk-17-1.png){width=864}\n:::\n:::\n\n\n\n### bar chart with a singe category hightlighted on top\n\nwith a bit of effor, a variable can also be shown on its own. In this case you can use `facet_grid()`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nn_chopbars_df_with_national   %>% \n\tmutate(highlight = region == \"Ghana\") %>% \n\t# Create a ggplot object and set the aesthetic mappings\n\t# use the reorder function to reorder the the bars\n\tggplot(mapping = aes(x = reorder(region,number_of_chop_bars), \n\t\t\t\t\t\t\t\t\t\t\t y = number_of_chop_bars,\n\t\t\t\t\t\t\t\t\t\t\t fill = highlight)) +\n\tgeom_col(width = 0.8) +\n\tgeom_text(mapping = aes(label = scales::comma(number_of_chop_bars)), hjust = 0) +\n\tgssthemes() +\n\tscale_y_continuous( expand = c( 0, 0 ),\n\t\t\t\t\t\t\t\t\t\t\tlimits = nicelimits,\n\t\t\t\t\t\t\t\t\t\t\tlabels = scales::comma,\n\t\t\t\t\t\t\t\t\t\t\tbreaks = scales::extended_breaks(only.loose = TRUE)) +\n\tscale_x_discrete(labels= function(x) highlight(x, \"Ghana\", \"black\")) +\n\tscale_fill_manual(values = c(`FALSE` = national_color, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t `TRUE` = scales::muted(national_color)),\n\t\t\t\t\t\t\t\t\t\tguide = \"none\") +\n\tlabs(x = NULL,\n\t\t\t y = \"number of chop bars\" )+\n\tcoord_flip(clip = \"off\") +\n\ttheme(panel.grid.major.x = element_line(color = \"gray\", size=0.25),\n\t\t\t\tpanel.grid.major.y = element_blank(),\n\t\t\t\taxis.text.x = element_text(vjust = 0.5),\n\t\t\t\tstrip.text = element_blank(),\n\t\t\t\taxis.text.y = element_markdown()) +\n\tfacet_grid(fct_rev(as.factor(highlight))~.,scales = \"free\",\n\t\t\t\t\t\t space = \"free_y\")# to make this work you need to make the y axis a markdown format\n```\n\n::: {.cell-output-display}\n![](graphics-guide/www/images/unnamed-chunk-18-1.png){width=768}\n:::\n:::\n\n\n\n## lollipop chart\n\nA lollipop chart is used visually represent time series data where magnitude of occurrence is to be communicated. It shows the relationship between a numeric and a categorical variable, as well as identifying trends or patterns over time. They can be used to display numerical data such as quantities and magnitude.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlollipop_df<-tribble(~year, ~elder,\"1960\",213477, \"1984\",493359, \"2000\",1363410, \"2010\",1640220, \"2021\", 1993300)\n\nlollipop_df %>%\nkable()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> year </th>\n   <th style=\"text-align:right;\"> elder </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> 1960 </td>\n   <td style=\"text-align:right;\"> 213477 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 1984 </td>\n   <td style=\"text-align:right;\"> 493359 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2000 </td>\n   <td style=\"text-align:right;\"> 1363410 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2010 </td>\n   <td style=\"text-align:right;\"> 1640220 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2021 </td>\n   <td style=\"text-align:right;\"> 1993300 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create lollipop plot\n```\n:::\n\n\n\n## line chart\n\n## area chart\n\n## Dumbell chart\n\n## Bumb chart\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsessionInfo()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nR version 4.2.2 (2022-10-31 ucrt)\nPlatform: x86_64-w64-mingw32/x64 (64-bit)\nRunning under: Windows 10 x64 (build 22621)\n\nMatrix products: default\n\nlocale:\n[1] LC_COLLATE=English_United Kingdom.utf8 \n[2] LC_CTYPE=English_United Kingdom.utf8   \n[3] LC_MONETARY=English_United Kingdom.utf8\n[4] LC_NUMERIC=C                           \n[5] LC_TIME=English_United Kingdom.utf8    \n\nattached base packages:\n[1] stats     graphics  grDevices utils     datasets  methods   base     \n\nother attached packages:\n [1] patchwork_1.1.2   kableExtra_1.3.4  scales_1.2.1      showtext_0.9-5   \n [5] showtextdb_3.0    sysfonts_0.8.8    gghighlight_0.4.0 ggtext_0.1.2     \n [9] glue_1.6.2        forcats_1.0.0     stringr_1.5.0     dplyr_1.0.10     \n[13] purrr_1.0.1       readr_2.1.3       tidyr_1.3.0       tibble_3.1.8     \n[17] ggplot2_3.4.0     tidyverse_1.3.2   knitr_1.42       \n\nloaded via a namespace (and not attached):\n [1] httr_1.4.4          jsonlite_1.8.4      viridisLite_0.4.1  \n [4] modelr_0.1.10       assertthat_0.2.1    highr_0.10         \n [7] googlesheets4_1.0.1 cellranger_1.1.0    yaml_2.3.7         \n[10] pillar_1.8.1        backports_1.4.1     digest_0.6.31      \n[13] gridtext_0.1.5      rvest_1.0.3         colorspace_2.1-0   \n[16] htmltools_0.5.4     pkgconfig_2.0.3     broom_1.0.3        \n[19] haven_2.5.1         webshot_0.5.4       svglite_2.1.1      \n[22] tzdb_0.3.0          timechange_0.2.0    googledrive_2.0.0  \n[25] generics_0.1.3      farver_2.1.1        ellipsis_0.3.2     \n[28] withr_2.5.0         cli_3.6.0           magrittr_2.0.3     \n[31] crayon_1.5.2        readxl_1.4.1        evaluate_0.20      \n[34] fs_1.6.0            fansi_1.0.4         xml2_1.3.3         \n[37] tools_4.2.2         hms_1.1.2           gargle_1.3.0       \n[40] lifecycle_1.0.3     munsell_0.5.0       reprex_2.0.2       \n[43] compiler_4.2.2      systemfonts_1.0.4   rlang_1.0.6        \n[46] grid_4.2.2          rstudioapi_0.14     htmlwidgets_1.6.1  \n[49] labeling_0.4.2      rmarkdown_2.20      gtable_0.3.1       \n[52] DBI_1.1.3           markdown_1.5        R6_2.5.1           \n[55] lubridate_1.9.1     fastmap_1.1.0       utf8_1.2.2         \n[58] commonmark_1.8.1    stringi_1.7.12      Rcpp_1.0.10        \n[61] vctrs_0.5.2         dbplyr_2.3.0        tidyselect_1.2.0   \n[64] xfun_0.36          \n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/kePrint-0.0.1/kePrint.js\"></script>\r\n<link href=\"site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}